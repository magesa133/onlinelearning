
    <style>
        body {
            background: linear-gradient(135deg, #4ade80, #6366f1, #fb923c);
            background-size: 400% 400%;
            animation: gradientBG 12s ease infinite;
        }

        p{
            text-align: center;
            font-size: 14px;
        }

        p a{
            color:#007bff;
            text-decoration: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .container {
            width: 72%;
            height: 70%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .register-container {
            width: 400px;
            background-color: #FFFFFF;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            animation: slideUp 1s ease-in-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .form-label {
            font-size: 14px;
            font-weight: 600;
        }

        .form-control {
            border-radius: 10px;
            height: 40px;
            font-size: 14px;
        }

        .btn {
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .video-preview {
            text-align: center;
        }

        .video-preview video {
            width: 100%;
            max-width: 250px;
            border: 2px solid #3B02ED;
            border-radius: 10px;
            margin-top: 10px;
        }

        .text {
            width: 350px;
            height: 50px;
            box-shadow: 2px 6px 18px rgba(66, 57, 238, .3);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 10px;
        }

        .text input {
            height: 40px;
            width: 80%;
            outline: none;
            border: none;
            font-size: 14px;
            margin: 5px;
        }

        .text img {
            margin-left: 20px;
        }

        .conditions {
            font-family: myriad pro;
            color: #BBC1CB;
            font-size: 14px;
        }

        .conditions a {
            color: #7D22E3;
            font-weight: 500;
        }

        .terms {
            display: flex;
            align-items: center;
        }

        button {
            width: 200px;
            height: 40px;
            outline: none;
            border: none;
            border-radius: 20px;
            background: linear-gradient(-30deg, #3B02ED, #8E2AE0 55%);
            box-shadow: 2px 6px 16px rgba(66, 57, 238, .3);
            color: #FFFFFF;
            font-weight: 600;
            letter-spacing: 1px;
            font-size: 13px;
            cursor: pointer;
            transition: all .3s ease;
        }

        button:active {
            transform: scale(1.1);
        }

        @media screen and (max-width: 1080px) {
            .container {
                height: 90%;
            }
        }

        @media screen and (max-width: 600px) {
            .container {
                width: 85%;
            }
        }

        @media screen and (max-width: 500px) {
            .text {
                width: 300px;
            }
        }

        @media screen and (max-width: 420px) {
            .container {
                width: 95%;
            }
            .heading {
                text-align: center;
            }
            .conditions {
                text-align: center;
            }
            input[type="checkbox"] {
                margin-right: 5px;
            }
            .text {
                width: 280px;
            }
        }
    </style>
</head>

    <div class="container">
        <div class="register-container">
            <h2>Register</h2>
            <form id="register-form" method="POST" action="{{ url_for('register') }}">
                

                <div class="mb-3 input-step" id="step-1">
                    <label for="username" class="form-label">What is your username?</label>
                    <div class="text">
                        <img src="https://i.postimg.cc/1zgS8WTF/user.png" alt="icon" height="20">
                        <input type="text" class="form-control" id="username" name="username" placeholder="Enter your username" required>
                    </div>
                </div>
                <div class="mb-3 input-step" id="step-2" style="display: none;">
                    <label for="email" class="form-label">What is your email address?</label>
                    <div class="text">
                        <img src="https://i.postimg.cc/DZBPRgvC/email.png" alt="icon" height="12">
                        <input type="email" class="form-control" id="email" name="email" placeholder="Enter your Email" required>
                    </div>
                </div>
                <div class="mb-3 input-step" id="step-3" style="display: none;">
                    <label for="password" class="form-label">What is your password?</label>
                    <div class="text">
                        <img src="https://i.postimg.cc/Nj5SDK4q/password.png" alt="icon" height="20">
                        <input type="password" class="form-control" id="password" name="password" placeholder="Enter ypur password" required>
                    </div>
                </div>
                <div class="mb-3 input-step" id="step-4" style="display: none;">
                    <label for="confirm_password" class="form-label">Please confirm your password.</label>
                    <div class="text">
                        <img src="https://i.postimg.cc/Nj5SDK4q/password.png" alt="icon" height="20">
                        <input type="password" class="form-control" id="confirm_password" placeholder="Confirm your password" name="confirm_password" required>
                    </div>
                </div>
                <div class="video-preview mb-3 input-step" id="step-5" style="display: none;">
                    <label class="form-label">Would you like to capture your face?</label>
                    <video id="video" autoplay></video>
                    <button type="button" id="capture-btn" class="btn btn-primary mt-3">Capture Your Face</button>
                    <canvas id="canvas" style="display: none;"></canvas>
                    <div id="captured-image" style="display: none;">
                        <h4>Captured Image:</h4>
                        <img id="image" src="" alt="Captured Face" style="width: 250px; border: 2px solid #3B02ED; border-radius: 10px;">
                    </div>
                </div>
                <input type="hidden" id="image_data" name="image_data">
                <div class="navigation-buttons">
                    <button type="button" class="btn btn-secondary" id="prev-btn" style="display: none;">Previous</button>
                    <button type="button" class="btn btn-primary" id="next-btn">Next</button>
                </div>
                <button type="submit" class="btn btn-primary mt-3" id="submit-btn" style="display: none;">Register</button>
                <p> <a href="{{ url_for('login')}}">I have an account</a></p>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const steps = document.querySelectorAll('.input-step');
            const nextButton = document.getElementById('next-btn');
            const prevButton = document.getElementById('prev-btn');
            const submitButton = document.getElementById('submit-btn');
            let currentStep = 0;

            function updateStepVisibility() {
                steps.forEach((step, index) => {
                    step.style.display = index === currentStep ? 'block' : 'none';
                });
                prevButton.style.display = currentStep > 0 ? 'block' : 'none';
                nextButton.style.display = currentStep < steps.length - 1 ? 'block' : 'none';
                submitButton.style.display = currentStep === steps.length - 1 ? 'block' : 'none';
            }

            nextButton.addEventListener('click', function () {
                if (currentStep < steps.length - 1) {
                    currentStep++;
                    updateStepVisibility();
                }
            });

            prevButton.addEventListener('click', function () {
                if (currentStep > 0) {
                    currentStep--;
                    updateStepVisibility();
                }
            });

            // Initialize video stream
            const video = document.getElementById('video');
            const captureButton = document.getElementById('capture-btn');
            const imageInput = document.getElementById('image_data');
            const canvas = document.getElementById('canvas');
            const capturedImage = document.getElementById('captured-image');
            const imageElement = document.getElementById('image');

            navigator.mediaDevices.getUserMedia({ video: true })
                .then(stream => {
                    video.srcObject = stream;

           captureButton.onclick = () => {
    const context = canvas.getContext('2d');
    const scaleFactor = 0.5; // Adjust scale factor as needed
    canvas.width = video.videoWidth * scaleFactor;
    canvas.height = video.videoHeight * scaleFactor;
    context.drawImage(video, 0, 0, canvas.width, canvas.height);

    const dataURL = canvas.toDataURL('image/jpeg', 0.7); // Compress to JPEG
    imageInput.value = dataURL;
    imageElement.src = dataURL;
    capturedImage.style.display = 'block';

    // Stop the camera after capture
    stream.getTracks().forEach(track => track.stop());
};

                })
                .catch(() => {
                    alert('Unable to access the camera.');
                });

            updateStepVisibility();
        });
    </script>

